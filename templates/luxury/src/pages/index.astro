---
import { getCollection } from 'astro:content';
import Layout from '../layouts/Layout.astro';
import Hero from '../components/Hero.astro';
import About from '../components/About.astro';
import ExperienceGrid from '../components/ExperienceGrid.astro';
import Insights from '../components/Insights.astro';
import Connect from '../components/Connect.astro';

const experienceEntries = await getCollection('experience');
const experience = experienceEntries
  .sort((a, b) => (a.data.order ?? 99) - (b.data.order ?? 99))
  .map((e) => ({ company: e.data.company, role: e.data.role, desc: e.data.desc, logo: e.data.logo }));

const writingsEntries = await getCollection('writings');
const writings = writingsEntries
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
  .map((w) => ({
    date: w.data.pubDate.toLocaleDateString('en-US', { month: 'short', year: 'numeric' }),
    title: w.data.title,
    excerpt: w.data.description,
    slug: w.id,
  }));
---

<Layout title="Jane Doe | Professional" description="Jane Doe - Professional based in New York. Strategy, leadership, and impact.">

    <Hero
        tagline="Professional Â· New York"
        firstName="Jane"
        lastName="Doe"
        subtitle="Senior Consultant @ Acme Corp.<br/>Strategy, leadership, and impact."
        ctaLabel="View My Work"
        ctaHref="#experience"
        secondaryCtaLabel="Get in Touch"
        secondaryCtaHref="#connect"
    />

    <About label="About">
        <p class="opacity-90">
            Welcome to my personal website. This is a placeholder for your introduction.
        </p>
        <p class="opacity-90">
            Share your professional background, your current role, and what drives you. Describe the industries you've worked in and the skills you've developed along the way.
        </p>
        <p class="opacity-90">
            Highlight your key strengths, interests, and the value you bring to your work. This section is a great place to let your personality shine through.
        </p>
    </About>

    <ExperienceGrid items={experience} />

    <Insights items={writings} />

    <Connect
        linkedinUrl="https://linkedin.com/in/your-profile"
        email="hello@example.com"
    />

</Layout>

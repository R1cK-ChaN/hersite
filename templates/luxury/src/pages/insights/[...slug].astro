---
import { getCollection, render } from 'astro:content';
import { siteConfig } from '../../../personal/site.config';
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
  const writings = await getCollection('writings');
  return writings.map((entry) => ({
    params: { slug: entry.id },
    props: { entry },
  }));
}

const { entry } = Astro.props;
const { Content } = await render(entry);
const siteName = siteConfig.title.split('|')[0]?.trim() || 'Home';
---

<Layout title={`${entry.data.title} | ${siteName}`} description={entry.data.description} ogImage={entry.data.heroImage}>

    <article class="py-24 md:py-32 px-6 md:px-12 lg:px-24">
        <div class="max-w-3xl mx-auto">
            <a href="/insights/" class="font-sans text-sm text-oldGold uppercase tracking-widest hover:text-navy transition-colors mb-8 inline-block">&larr; Back to Insights</a>

            <header class="mb-16">
                <time class="font-sans text-xs uppercase tracking-widest text-oldGold block mb-4">
                    {entry.data.pubDate.toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}
                </time>
                <h1 class="font-serif text-5xl md:text-6xl lg:text-7xl text-ink font-light leading-tight">
                    {entry.data.title}
                </h1>
            </header>

            <div class="prose prose-lg max-w-none font-sans text-ink/80 leading-relaxed
                prose-headings:font-serif prose-headings:text-ink prose-headings:font-normal
                prose-h2:text-3xl prose-h2:mt-12 prose-h2:mb-4
                prose-h3:text-2xl prose-h3:mt-8 prose-h3:mb-3
                prose-a:text-navy prose-a:underline-offset-4
                prose-blockquote:border-l-stone prose-blockquote:font-serif prose-blockquote:italic">
                <Content />
            </div>
        </div>
    </article>

</Layout>

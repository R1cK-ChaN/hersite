---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const allPosts = await getCollection('blog');
const posts = allPosts.sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<Layout title="Blog">
  <div class="pt-24">
    <section class="py-16 px-6 md:px-12 lg:px-24">
      <div class="max-w-5xl mx-auto">
        <span class="block font-sans text-[#D4CFC7] text-xs uppercase tracking-[0.3em] mb-6">Writing</span>
        <h1 class="font-serif text-5xl md:text-7xl text-[#1A1A1A] font-light mb-4">Blog</h1>
        <p class="font-sans text-lg text-[#1A1A1A]/60 font-light">Thoughts on luxury, finance, and life between cultures.</p>
      </div>
    </section>

    <section class="px-6 md:px-12 lg:px-24 pb-24">
      <div class="max-w-5xl mx-auto">
        <div class="space-y-0">
          {posts.map((post) => (
            <a href={`/blog/${post.id}`} class="group flex flex-col md:flex-row gap-4 md:gap-12 py-10 border-t border-[#D4CFC7] cursor-pointer hover:bg-white/50 transition-colors no-underline">
              <div class="md:w-32 flex-shrink-0">
                <span class="font-sans text-xs uppercase tracking-widest text-[#8B7355]">
                  {post.data.pubDate.toLocaleDateString('en-US', { month: 'short', year: 'numeric' })}
                </span>
              </div>
              <div class="flex-grow">
                <h2 class="font-serif text-3xl md:text-4xl mb-2 text-[#1A1A1A] group-hover:text-[#1C3A5E] transition-colors">
                  {post.data.title}
                </h2>
                <p class="font-sans text-base text-[#1A1A1A]/60 max-w-2xl mb-3">
                  {post.data.description}
                </p>
                {post.data.tags && (
                  <div class="flex flex-wrap gap-2">
                    {post.data.tags.map((tag) => (
                      <span class="font-sans text-[10px] uppercase tracking-widest text-[#8B7355] border border-[#D4CFC7] px-3 py-1">{tag}</span>
                    ))}
                  </div>
                )}
              </div>
              <div class="hidden md:flex items-center opacity-0 group-hover:opacity-100 transition-opacity -translate-x-4 group-hover:translate-x-0 duration-300">
                <span class="text-3xl font-serif">&rarr;</span>
              </div>
            </a>
          ))}
          <div class="w-full h-[1px] bg-[#D4CFC7]"></div>
        </div>
      </div>
    </section>
  </div>
</Layout>

---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import { render } from 'astro:content';

export async function getStaticPaths() {
  const posts = await getCollection('blog');
  return posts.map((post) => ({
    params: { slug: post.id },
    props: { post },
  }));
}

const { post } = Astro.props;
const { Content } = await render(post);
---

<Layout title={post.data.title}>
  <div class="pt-24">
    <article class="px-6 md:px-12 lg:px-24 py-16">
      <div class="max-w-3xl mx-auto">
        <!-- Back link -->
        <a href="/blog" class="inline-block font-sans text-xs uppercase tracking-widest text-[#8B7355] hover:text-[#1C3A5E] transition-colors mb-12 no-underline">
          &larr; Back to Blog
        </a>

        <!-- Header -->
        <header class="mb-12 pb-8 border-b border-[#D4CFC7]">
          <span class="block font-sans text-xs uppercase tracking-widest text-[#8B7355] mb-4">
            {post.data.pubDate.toLocaleDateString('en-US', {
              year: 'numeric',
              month: 'long',
              day: 'numeric',
            })}
          </span>
          <h1 class="font-serif text-4xl md:text-6xl text-[#1A1A1A] font-light leading-tight mb-6">{post.data.title}</h1>
          {post.data.tags && (
            <div class="flex flex-wrap gap-2">
              {post.data.tags.map((tag) => (
                <span class="font-sans text-[10px] uppercase tracking-widest text-[#8B7355] border border-[#D4CFC7] px-3 py-1">{tag}</span>
              ))}
            </div>
          )}
        </header>

        <!-- Content -->
        <div class="prose-luxury">
          <Content />
        </div>
      </div>
    </article>
  </div>

  <style>
    .prose-luxury {
      font-family: 'DM Sans', sans-serif;
      font-size: 1.05rem;
      line-height: 1.85;
      color: #1A1A1A;
    }

    .prose-luxury :global(h1),
    .prose-luxury :global(h2),
    .prose-luxury :global(h3),
    .prose-luxury :global(h4) {
      font-family: 'Cormorant Garamond', serif;
      color: #1A1A1A;
      font-weight: 400;
      margin-top: 2.5rem;
      margin-bottom: 1rem;
    }

    .prose-luxury :global(h1) {
      font-size: 2.5rem;
    }

    .prose-luxury :global(h2) {
      font-size: 1.875rem;
      color: #1C3A5E;
    }

    .prose-luxury :global(h3) {
      font-size: 1.5rem;
      color: #1C3A5E;
    }

    .prose-luxury :global(p) {
      margin-bottom: 1.25rem;
      color: rgba(26, 26, 26, 0.85);
    }

    .prose-luxury :global(a) {
      color: #8B7355;
      text-decoration: underline;
      text-decoration-thickness: 1px;
      text-underline-offset: 3px;
      text-decoration-color: #D4CFC7;
    }

    .prose-luxury :global(a:hover) {
      color: #1C3A5E;
    }

    .prose-luxury :global(strong) {
      font-weight: 500;
      color: #1A1A1A;
    }

    .prose-luxury :global(blockquote) {
      border-left: 2px solid #D4CFC7;
      padding: 0.75rem 1.25rem;
      margin: 2rem 0;
      font-family: 'Cormorant Garamond', serif;
      font-size: 1.3rem;
      font-style: italic;
      color: rgba(26, 26, 26, 0.7);
    }

    .prose-luxury :global(ul),
    .prose-luxury :global(ol) {
      margin-bottom: 1.25rem;
      padding-left: 1.5rem;
    }

    .prose-luxury :global(li) {
      margin-bottom: 0.5rem;
      color: rgba(26, 26, 26, 0.8);
    }

    .prose-luxury :global(hr) {
      border: none;
      border-top: 1px solid #D4CFC7;
      margin: 3rem 0;
    }

    .prose-luxury :global(img) {
      border-radius: 2px;
      margin: 2rem 0;
    }

    .prose-luxury :global(code) {
      font-family: 'Fira Code', monospace;
      background-color: #F5F2EC;
      padding: 0.2em 0.4em;
      border-radius: 2px;
      font-size: 0.9em;
    }

    .prose-luxury :global(pre) {
      background-color: #1A1A1A;
      color: #F5F2EC;
      padding: 1.25rem;
      border-radius: 2px;
      overflow-x: auto;
      margin-bottom: 1.5rem;
    }

    .prose-luxury :global(pre code) {
      background: none;
      padding: 0;
    }
  </style>
</Layout>
